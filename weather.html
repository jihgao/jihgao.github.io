---
layout: default
---




<!-- <div id="openweathermap-widget-11"></div>
<script src='https://openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script><script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 11,cityid: '1816670',appid: '7b528850734964cf1ff21cf379605e3b',units: 'metric',containerid: 'openweathermap-widget-11',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "https://openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script>

 -->
<div class="post-list">
  <div id="location"></div>
  <audio id="sound" autoplay></audio>
</div>

<script type="text/javascript">

  window.onload = function(){
    var sound = document.querySelector('#sound');
    function say(text){
      text = '北京' + text;
      sound.src = ['http://tsn.baidu.com/text2audio?lan=zh&ctp=1&cuid=abcdxxx&tok=24.c7bdc0d699a7360afd5e5446e02ff60c.2592000.1513302130.282335-10362746', '&tex=', text,'&vol=9'].join('');
    }

    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(function(position) {
        document.querySelector('#location').textContent = [position.coords.latitude, position.coords.longitude].join(",");
      });
    } else {
      /* geolocation IS NOT available */
    }
    fetch('http://openweathermap.org/data/2.5/forecast/daily?appid=b1b15e88fa797225412429c1c50c122a1&units=metric&id=1816670&lang=zh_cn', {
      method: 'GET',
      mode:'cors'
    }).then(function(response){
      return response.json();
    }).then(function(response){
      say(response.list[0].weather[0].description);
    })
  };
</script>
